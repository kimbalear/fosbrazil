{"version":3,"file":"validateRegistration.min.js","sources":["../src/validateRegistration.js"],"sourcesContent":["export const validate = () => {\n\n    const form = document.querySelector('.mform.full-width-labels, .mform');\n    const cpfInput = document.getElementById('id_profile_field_cpf_number');\n    const phoneInput = document.getElementById('id_profile_field_phonenumber');\n    const dayInput = document.getElementById('id_profile_field_dataofbirth_day');\n    const monthInput = document.getElementById('id_profile_field_dataofbirth_month');\n    const yearInput = document.getElementById('id_profile_field_dataofbirth_year');\n    const occupationInput = document.getElementById('id_profile_field_occupation');\n    const genderInput = document.getElementById('id_profile_field_gender');\n    const genderOtherInput = document.getElementById(\"fitem_id_profile_field_gender_other\");\n    const occupationOtherInput = document.getElementById(\"fitem_id_profile_field_occupation_other\");\n    const occupationSocialMediaInput1 = document.getElementById('fitem_id_profile_field_occupation_socialmedia1');\n    const occupationSocialMediaInput2 = document.getElementById('fitem_id_profile_field_occupation_socialmedia2');\n    const occupationSocialMediaInput3 = document.getElementById('fitem_id_profile_field_occupation_socialmedia3');\n    const occupationSocialMediaInput4 = document.getElementById('fitem_id_profile_field_occupation_socialmedia4');\n\n    cpfInput.addEventListener('input', function () {\n        let value = cpfInput.value.replace(/\\D/g, '');\n\n        if (value.length > 11) value = value.slice(0, 11);\n\n        if (value.length >= 9) {\n            cpfInput.value = value.replace(/(\\d{3})(\\d{3})(\\d{3})(\\d{0,2})/, \"$1.$2.$3-$4\");\n        } else if (value.length >= 6) {\n            cpfInput.value = value.replace(/(\\d{3})(\\d{3})(\\d{0,3})/, \"$1.$2.$3\");\n        } else if (value.length >= 3) {\n            cpfInput.value = value.replace(/(\\d{3})(\\d{0,3})/, \"$1.$2\");\n        } else {\n            cpfInput.value = value;\n        }\n    });\n\n    form.addEventListener('submit', function(event) {\n    const phoneNumber = libphonenumber.parsePhoneNumberFromString(phoneInput.value, 'BR');\n        \n       if (!isValidCPFFormat(cpfInput.value)) {\n            event.preventDefault();\n            alert('Digite um CPF válido no formato 000.000.000-00.');\n            cpfInput.focus();\n            return false;\n        }\n      \n        if(!EighteenYearsPassed(dayInput.value,monthInput.value,yearInput.value)){\n            event.preventDefault();\n            alert('É necessário ter 18 anos ou mais para se registrar neste site.');\n            return false;\n        }\n      \n        if(!phoneNumber || !phoneNumber.isValid()){\n            event.preventDefault();\n            alert('Digite um número de telefone válido.');\n            phoneInput.focus();\n            return false;\n        }\n\n    });\n    \n    occupationInput.addEventListener(\"change\", function () {\n        const value = occupationInput.value;\n    \n        const isOutro = value === \"Outro\";\n        occupationOtherInput.style.display = isOutro ? \"flex\" : \"none\";\n    \n        if (!isOutro) {\n            const occupationText = occupationOtherInput.querySelector(\"#id_profile_field_occupation_other\");\n            if (occupationText) occupationText.value = \"\";\n        } else {\n            occupationOtherInput.focus();\n        }\n    \n        const isTrabalhador = value.includes(\"Trabalhador(a)\");\n        const socialMediaFields = [\n            occupationSocialMediaInput1,\n            occupationSocialMediaInput2,\n            occupationSocialMediaInput3,\n            occupationSocialMediaInput4\n        ];\n    \n        socialMediaFields.forEach((field, index) => {\n            const input = field.querySelector(`#id_profile_field_occupation_socialmedia${index + 1}`);\n            if (isTrabalhador) {\n                field.style.display = \"flex\";\n                if (index === 0) field.focus();\n            } else {\n                field.style.display = \"none\";\n                if (input) input.value = \"\";\n            }\n        });\n    });\n    \n\n    genderInput.addEventListener(\"change\", function() {\n        if (genderInput.value === \"Outros\") {\n            genderOtherInput.style.display = \"flex\";\n            genderOtherInput.focus();\n        } else {\n            genderOtherInput.style.display = \"none\";\n            const genderText = occupationOtherInput.querySelector(\"#id_profile_field_gender_other\");\n            genderText.value = \"\";\n        }\n    });\n    \n};\n\nfunction EighteenYearsPassed(day, month, year) {\n    const dayInt = parseInt(day, 10);\n    const monthInt = parseInt(month, 10) - 1; \n    const yearInt = parseInt(year, 10);\n  \n    const inputDate = new Date(yearInt, monthInt, dayInt);\n    const currentDate = new Date();\n  \n    const date18YearsAgo = new Date();\n    date18YearsAgo.setFullYear(currentDate.getFullYear() - 18);\n  \n    return inputDate <= date18YearsAgo;\n  }\n\n  function isValidCPFFormat(cpf) {\n    const regex = /^\\d{3}\\.\\d{3}\\.\\d{3}-\\d{2}$/;\n    return regex.test(cpf);\n  }\n  "],"names":["_exports","validate","form","document","querySelector","cpfInput","getElementById","phoneInput","dayInput","monthInput","yearInput","occupationInput","genderInput","genderOtherInput","occupationOtherInput","occupationSocialMediaInput1","occupationSocialMediaInput2","occupationSocialMediaInput3","occupationSocialMediaInput4","addEventListener","value","replace","length","slice","event","phoneNumber","libphonenumber","parsePhoneNumberFromString","cpf","test","day","month","year","dayInt","parseInt","monthInt","yearInt","inputDate","Date","currentDate","date18YearsAgo","setFullYear","getFullYear","EighteenYearsPassed","isValid","preventDefault","alert","focus","isOutro","style","display","occupationText","isTrabalhador","includes","forEach","field","index","input"],"mappings":"+JAuGEA,SAAAC,SAvGsBA,KAEpB,MAAMC,KAAOC,SAASC,cAAc,oCAC9BC,SAAWF,SAASG,eAAe,+BACnCC,WAAaJ,SAASG,eAAe,gCACrCE,SAAWL,SAASG,eAAe,oCACnCG,WAAaN,SAASG,eAAe,sCACrCI,UAAYP,SAASG,eAAe,qCACpCK,gBAAkBR,SAASG,eAAe,+BAC1CM,YAAcT,SAASG,eAAe,2BACtCO,iBAAmBV,SAASG,eAAe,uCAC3CQ,qBAAuBX,SAASG,eAAe,2CAC/CS,4BAA8BZ,SAASG,eAAe,kDACtDU,4BAA8Bb,SAASG,eAAe,kDACtDW,4BAA8Bd,SAASG,eAAe,kDACtDY,4BAA8Bf,SAASG,eAAe,kDAE5DD,SAASc,iBAAiB,SAAS,WAC/B,IAAIC,MAAQf,SAASe,MAAMC,QAAQ,MAAO,IAEtCD,MAAME,OAAS,KAAIF,MAAQA,MAAMG,MAAM,EAAG,KAE1CH,MAAME,QAAU,EAChBjB,SAASe,MAAQA,MAAMC,QAAQ,iCAAkC,eAC1DD,MAAME,QAAU,EACvBjB,SAASe,MAAQA,MAAMC,QAAQ,0BAA2B,YACnDD,MAAME,QAAU,EACvBjB,SAASe,MAAQA,MAAMC,QAAQ,mBAAoB,SAEnDhB,SAASe,MAAQA,KAEzB,IAEAlB,KAAKiB,iBAAiB,UAAU,SAASK,OACzC,MAAMC,YAAcC,eAAeC,2BAA2BpB,WAAWa,MAAO,MAE7E,OAmFqBQ,IAnFCvB,SAASe,MAoFpB,8BACDS,KAAKD,KAhBtB,SAA6BE,IAAKC,MAAOC,MACrC,MAAMC,OAASC,SAASJ,IAAK,IACvBK,SAAWD,SAASH,MAAO,IAAM,EACjCK,QAAUF,SAASF,KAAM,IAEzBK,UAAY,IAAIC,KAAKF,QAASD,SAAUF,QACxCM,YAAc,IAAID,KAElBE,eAAiB,IAAIF,KAG3B,OAFAE,eAAeC,YAAYF,YAAYG,cAAgB,IAEhDL,WAAaG,cACtB,CA1EUG,CAAoBnC,SAASY,MAAMX,WAAWW,MAAMV,UAAUU,OAM9DK,aAAgBA,YAAYmB,eAAhC,GACIpB,MAAMqB,iBACNC,MAAM,wCACNvC,WAAWwC,SACJ,IATPvB,MAAMqB,iBACNC,MAAM,mEACC,IATPtB,MAAMqB,iBACNC,MAAM,mDACNzC,SAAS0C,SACF,GA+EjB,IAA0BnB,GA/DxB,IAEAjB,gBAAgBQ,iBAAiB,UAAU,WACvC,MAAMC,MAAQT,gBAAgBS,MAExB4B,QAAoB,UAAV5B,MAGhB,GAFAN,qBAAqBmC,MAAMC,QAAUF,QAAU,OAAS,OAEnDA,QAIDlC,qBAAqBiC,YAJX,CACV,MAAMI,eAAiBrC,qBAAqBV,cAAc,sCACtD+C,iBAAgBA,eAAe/B,MAAQ,GAC/C,CAIA,MAAMgC,cAAgBhC,MAAMiC,SAAS,kBACX,CACtBtC,4BACAC,4BACAC,4BACAC,6BAGcoC,SAAQ,CAACC,MAAOC,SAC9B,MAAMC,MAAQF,MAAMnD,cAAc,2CAA2CoD,MAAQ,KACjFJ,eACAG,MAAMN,MAAMC,QAAU,OACR,IAAVM,OAAaD,MAAMR,UAEvBQ,MAAMN,MAAMC,QAAU,OAClBO,QAAOA,MAAMrC,MAAQ,IAC7B,GAER,IAGAR,YAAYO,iBAAiB,UAAU,WACnC,GAA0B,WAAtBP,YAAYQ,MACZP,iBAAiBoC,MAAMC,QAAU,OACjCrC,iBAAiBkC,YACd,CACHlC,iBAAiBoC,MAAMC,QAAU,OACdpC,qBAAqBV,cAAc,kCAC3CgB,MAAQ,EACvB,CACJ,GAAE,CAqBH"}