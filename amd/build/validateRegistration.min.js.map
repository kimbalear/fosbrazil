{"version":3,"file":"validateRegistration.min.js","sources":["../src/validateRegistration.js"],"sourcesContent":["export const validate = () => {\n\n    const form = document.querySelector('.mform.full-width-labels, .mform');\n    const phoneInput = document.getElementById('id_profile_field_phonenumber');\n    const dayInput = document.getElementById('id_profile_field_dataofbirth_day');\n    const monthInput = document.getElementById('id_profile_field_dataofbirth_month');\n    const yearInput = document.getElementById('id_profile_field_dataofbirth_year');\n    const occupationInput = document.getElementById('id_profile_field_occupation');\n    const genderInput = document.getElementById('id_profile_field_gender');\n    const cpfInput = document.getElementById('id_profile_field_cpf_number');\n    const genderOtherInput = document.getElementById(\"fitem_id_profile_field_gender_other\");\n    const occupationOtherInput = document.getElementById(\"fitem_id_profile_field_occupation_other\");\n    const occupationSocialMediaInput1 = document.getElementById('fitem_id_profile_field_occupation_socialmedia1');\n    const occupationSocialMediaInput2 = document.getElementById('fitem_id_profile_field_occupation_socialmedia2');\n    const occupationSocialMediaInput3 = document.getElementById('fitem_id_profile_field_occupation_socialmedia3');\n    const occupationSocialMediaInput4 = document.getElementById('fitem_id_profile_field_occupation_socialmedia4');\n\n    form.addEventListener('submit', function(event) {\n        const phoneNumber = libphonenumber.parsePhoneNumberFromString(phoneInput.value, 'BR');\n        \n        if(!phoneNumber || !phoneNumber.isValid()){\n            event.preventDefault();\n            alert('Digite um número de telefone válido.');\n            phoneInput.focus();\n            return false;\n        }\n\n        if(!EighteenYearsPassed(dayInput.value,monthInput.value,yearInput.value)){\n            event.preventDefault();\n            alert('É necessário ter 18 anos ou mais para se registrar neste site.');\n            return false;\n        }\n\n        if (!isValidCPFFormat(cpfInput.value)) {\n            event.preventDefault();\n            alert('Digite um CPF válido.');\n            cpfInput.focus();\n            return false;\n        }\n    });\n    occupationInput.addEventListener(\"change\", function () {\n        const value = occupationInput.value;\n    \n        const isOutro = value === \"Outro\";\n        occupationOtherInput.style.display = isOutro ? \"flex\" : \"none\";\n    \n        if (!isOutro) {\n            const occupationText = occupationOtherInput.querySelector(\"#id_profile_field_occupation_other\");\n            if (occupationText) occupationText.value = \"\";\n        } else {\n            occupationOtherInput.focus();\n        }\n    \n        const isTrabalhador = value.includes(\"Trabalhador(a)\");\n        const socialMediaFields = [\n            occupationSocialMediaInput1,\n            occupationSocialMediaInput2,\n            occupationSocialMediaInput3,\n            occupationSocialMediaInput4\n        ];\n    \n        socialMediaFields.forEach((field, index) => {\n            const input = field.querySelector(`#id_profile_field_occupation_socialmedia${index + 1}`);\n            if (isTrabalhador) {\n                field.style.display = \"flex\";\n                if (index === 0) field.focus();\n            } else {\n                field.style.display = \"none\";\n                if (input) input.value = \"\";\n            }\n        });\n    });\n    \n\n    genderInput.addEventListener(\"change\", function() {\n        if (genderInput.value === \"Outros\") {\n            genderOtherInput.style.display = \"flex\";\n            genderOtherInput.focus();\n        } else {\n            genderOtherInput.style.display = \"none\";\n            const genderText = occupationOtherInput.querySelector(\"#id_profile_field_gender_other\");\n            genderText.value = \"\";\n        }\n    });\n    \n};\n\nfunction EighteenYearsPassed(day, month, year) {\n  \n    const dayInt = parseInt(day, 10);\n    const monthInt = parseInt(month, 10) - 1; \n    const yearInt = parseInt(year, 10);\n  \n    // Create a date object for the input date\n    const inputDate = new Date(yearInt, monthInt, dayInt);\n    // Get the current date\n    const currentDate = new Date();\n  \n    // Calculate the date exactly 18 years ago\n    const date18YearsAgo = new Date();\n    date18YearsAgo.setFullYear(currentDate.getFullYear() - 18);\n  \n    // Check if the input date is on or before the date 18 years ago\n    return inputDate <= date18YearsAgo;\n  }\n\n  function isValidCPFFormat(cpf) {\n    const regex = /^\\d{3}\\.\\d{3}\\.\\d{3}-\\d{2}$/;\n    return regex.test(cpf);\n  }\n  "],"names":["_exports","validate","form","document","querySelector","phoneInput","getElementById","dayInput","monthInput","yearInput","occupationInput","genderInput","cpfInput","genderOtherInput","occupationOtherInput","occupationSocialMediaInput1","occupationSocialMediaInput2","occupationSocialMediaInput3","occupationSocialMediaInput4","addEventListener","event","phoneNumber","libphonenumber","parsePhoneNumberFromString","value","isValid","day","month","year","dayInt","parseInt","monthInt","yearInt","inputDate","Date","currentDate","date18YearsAgo","setFullYear","getFullYear","EighteenYearsPassed","cpf","test","preventDefault","alert","focus","isOutro","style","display","occupationText","isTrabalhador","includes","forEach","field","index","input"],"mappings":"+JAqFEA,SAAAC,SArFsBA,KAEpB,MAAMC,KAAOC,SAASC,cAAc,oCAC9BC,WAAaF,SAASG,eAAe,gCACrCC,SAAWJ,SAASG,eAAe,oCACnCE,WAAaL,SAASG,eAAe,sCACrCG,UAAYN,SAASG,eAAe,qCACpCI,gBAAkBP,SAASG,eAAe,+BAC1CK,YAAcR,SAASG,eAAe,2BACtCM,SAAWT,SAASG,eAAe,+BACnCO,iBAAmBV,SAASG,eAAe,uCAC3CQ,qBAAuBX,SAASG,eAAe,2CAC/CS,4BAA8BZ,SAASG,eAAe,kDACtDU,4BAA8Bb,SAASG,eAAe,kDACtDW,4BAA8Bd,SAASG,eAAe,kDACtDY,4BAA8Bf,SAASG,eAAe,kDAE5DJ,KAAKiB,iBAAiB,UAAU,SAASC,OACrC,MAAMC,YAAcC,eAAeC,2BAA2BlB,WAAWmB,MAAO,MAEhF,OAAIH,aAAgBA,YAAYI,UAmExC,SAA6BC,IAAKC,MAAOC,MAErC,MAAMC,OAASC,SAASJ,IAAK,IACvBK,SAAWD,SAASH,MAAO,IAAM,EACjCK,QAAUF,SAASF,KAAM,IAGzBK,UAAY,IAAIC,KAAKF,QAASD,SAAUF,QAExCM,YAAc,IAAID,KAGlBE,eAAiB,IAAIF,KAI3B,OAHAE,eAAeC,YAAYF,YAAYG,cAAgB,IAGhDL,WAAaG,cACtB,CA7EUG,CAAoBhC,SAASiB,MAAMhB,WAAWgB,MAAMf,UAAUe,QA+E9CgB,IAzEE5B,SAASY,MA0ErB,8BACDiB,KAAKD,UA3Ed,GACIpB,MAAMsB,iBACNC,MAAM,yBACN/B,SAASgC,SACF,KATPxB,MAAMsB,iBACNC,MAAM,mEACC,IATPvB,MAAMsB,iBACNC,MAAM,wCACNtC,WAAWuC,SACJ,GAkFjB,IAA0BJ,GAnExB,IACA9B,gBAAgBS,iBAAiB,UAAU,WACvC,MAAMK,MAAQd,gBAAgBc,MAExBqB,QAAoB,UAAVrB,MAGhB,GAFAV,qBAAqBgC,MAAMC,QAAUF,QAAU,OAAS,OAEnDA,QAID/B,qBAAqB8B,YAJX,CACV,MAAMI,eAAiBlC,qBAAqBV,cAAc,sCACtD4C,iBAAgBA,eAAexB,MAAQ,GAC/C,CAIA,MAAMyB,cAAgBzB,MAAM0B,SAAS,kBACX,CACtBnC,4BACAC,4BACAC,4BACAC,6BAGciC,SAAQ,CAACC,MAAOC,SAC9B,MAAMC,MAAQF,MAAMhD,cAAc,2CAA2CiD,MAAQ,KACjFJ,eACAG,MAAMN,MAAMC,QAAU,OACR,IAAVM,OAAaD,MAAMR,UAEvBQ,MAAMN,MAAMC,QAAU,OAClBO,QAAOA,MAAM9B,MAAQ,IAC7B,GAER,IAGAb,YAAYQ,iBAAiB,UAAU,WACnC,GAA0B,WAAtBR,YAAYa,MACZX,iBAAiBiC,MAAMC,QAAU,OACjClC,iBAAiB+B,YACd,CACH/B,iBAAiBiC,MAAMC,QAAU,OACdjC,qBAAqBV,cAAc,kCAC3CoB,MAAQ,EACvB,CACJ,GAAE,CA0BH"}